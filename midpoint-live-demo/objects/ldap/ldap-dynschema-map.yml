apiVersion: v1
kind: ConfigMap
metadata:
  name: ldap-dynschema-map
data:
  dyngroup.schema: "# dyngroup.schema -- Dynamic Group schema\n# $OpenLDAP$\n## This work is part of OpenLDAP Software <http://www.openldap.org/>.\n##\n## Copyright 1998-2017 The OpenLDAP Foundation.\n## All rights reserved.\n##\n## Redistribution and use in source and binary forms, with or without\n## modification, are permitted only as authorized by the OpenLDAP\n## Public License.\n##\n## A copy of this license is available in the file LICENSE in the\n## top-level directory of the distribution or, alternatively, at\n## <http://www.OpenLDAP.org/license.html>.\n#\n# Dynamic Group schema (experimental), as defined by Netscape.  See\n# http://www.redhat.com/docs/manuals/ent-server/pdf/esadmin611.pdf\n# page 70 for details on how these groups were used.\n#\n# A description of the objectclass definition is available here:\n# http://www.redhat.com/docs/manuals/dir-server/schema/7.1/oc_dir.html#1303745\n#\n# depends upon:\n#\tcore.schema\n#\n# These definitions are considered experimental due to the lack of\n# a formal specification (e.g., RFC).\n#\n# NOT RECOMMENDED FOR PRODUCTION USE!  USE WITH CAUTION!\n#\n# The Netscape documentation describes this as an auxiliary objectclass\n# but their implementations have always defined it as a structural class.\n# The sloppiness here is because Netscape-derived servers don't actually\n# implement the X.500 data model, and they don't honor the distinction\n# between structural and auxiliary classes. This fact is noted here:\n# http://forum.java.sun.com/thread.jspa?threadID=5016864&messageID=9034636\n#\n# In accordance with other existing implementations, we define it as a\n# structural class.\n#\n# Our definition of memberURL also does not match theirs but again\n# their published definition and what works in practice do not agree.\n# In other words, the Netscape definitions are broken and interoperability\n# is not guaranteed.\n#\n# Also see the new DynGroup proposed spec at\n# http://tools.ietf.org/html/draft-haripriya-dynamicgroup-02\n\nobjectIdentifier NetscapeRoot 2.16.840.1.113730\n\nobjectIdentifier NetscapeLDAP NetscapeRoot:3\nobjectIdentifier NetscapeLDAPattributeType NetscapeLDAP:1\nobjectIdentifier NetscapeLDAPobjectClass NetscapeLDAP:2\n\nobjectIdentifier OpenLDAPExp11\t1.3.6.1.4.1.4203.666.11\nobjectIdentifier DynGroupBase\tOpenLDAPExp11:8\nobjectIdentifier DynGroupAttr\tDynGroupBase:1\nobjectIdentifier DynGroupOC\tDynGroupBase:2\n\nattributetype ( NetscapeLDAPattributeType:198\n\tNAME 'memberURL'\n\tDESC 'Identifies an URL associated with each member of a group. Any type of labeled URL can be used.'\n\tSUP labeledURI )\n\nattributetype ( DynGroupAttr:1\n\tNAME 'dgIdentity'\n\tDESC 'Identity to use when processing the memberURL'\n\tSUP distinguishedName SINGLE-VALUE )\n\nattributeType ( DynGroupAttr:2\n\tNAME 'dgAuthz'\n\tDESC 'Optional authorization rules that determine who is allowed to assume the dgIdentity'\n\tEQUALITY authzMatch\n\tSYNTAX 1.3.6.1.4.1.4203.666.2.7\n\tX-ORDERED 'VALUES' )\n\nobjectClass ( NetscapeLDAPobjectClass:33\n\tNAME 'groupOfURLs'\n\tSUP top STRUCTURAL\n\tMUST cn\n\tMAY ( memberURL $ businessCategory $ description $ o $ ou $\n\t\towner $ seeAlso ) )\n\n# The Haripriya dyngroup schema still needs a lot of work.\n# We're just adding support for the dgIdentity attribute for now...\nobjectClass ( DynGroupOC:1\n\tNAME 'dgIdentityAux'\n\tSUP top AUXILIARY\n\tMAY ( dgIdentity $ dgAuthz ) )\n"

