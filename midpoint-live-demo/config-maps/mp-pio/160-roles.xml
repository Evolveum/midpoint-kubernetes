<?xml version="1.0" encoding="UTF-8"?>
<objects xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3">
	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="00000000-0000-0000-0000-000000000004" version="23">
    <name>Superuser</name>
    <description>Role that gives user full authorization in MidPoint.</description>
    <subtype>system</subtype>
    <authorization id="1">
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-3#all</action>
    </authorization>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="00000000-0000-0000-0000-000000000008" version="33">
    <name>End user</name>
    <description>Role authorizing end users to log in, change their passwords and review assigned accounts.</description>
    <subtype>system</subtype>
    <authorization id="1">
        <name>gui-self-service-access</name>
        <description>
    		Allow access to all self-service operations in GUI.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#selfAll</action>
    </authorization>
    <authorization id="2">
        <name>self-read</name>
        <description>
    		Allow to read all the properties of "self" object. I.e. every logged-in user can read
    		object that represent his own identity.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="14">
            <special>self</special>
        </object>
    </authorization>
    <authorization id="3">
        <name>self-shadow-read</name>
        <description>
    		Allow to read all the properties of all the shadows that belong to "self" object. 
    		I.e. every logged-in user can read all his accounts.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="15">
            <type>ShadowType</type>
            <owner>
                <special>self</special>
            </owner>
        </object>
    </authorization>
    <authorization id="4">
        <name>self-persona-read</name>
        <description>
    		Allow to read all the personas of currently logged-in user.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="16">
            <type>UserType</type>
            <owner>
                <special>self</special>
            </owner>
        </object>
    </authorization>
    <authorization id="5">
        <name>self-credentials-request</name>
        <description>
    		Allow to modify user's own credentials.
    		Note that this is a request phase authorization. It also requires corresponding execution-phase authorization.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#changeCredentials</action>
        <phase>request</phase>
        <object id="17">
            <special>self</special>
        </object>
        <c:item>credentials</c:item>
    </authorization>
    <authorization id="6">
        <name>self-shadow-credentials-request</name>
        <description>
    		Allow to modify credentials of all users accounts.
    		Note that this is a request phase authorization. It also requires corresponding execution-phase authorization.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#changeCredentials</action>
        <phase>request</phase>
        <object id="18">
            <type>ShadowType</type>
            <owner>
                <special>self</special>
            </owner>
        </object>
        <c:item>credentials</c:item>
    </authorization>
    <authorization id="7">
        <name>assign-requestable-roles</name>
        <description>
    		Allow to assign requestable roles. This allows to request roles in a request-and-approve process.
    	    The requestable roles will be displayed in the role request dialog by default.
    	    Please note that the roles also need an approved definition to go through the approval process.
    	    Otherwise they will be assigned automatically wihout any approval. 
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#assign</action>
        <phase>request</phase>
        <object id="19">
            <special>self</special>
        </object>
        <target id="20">
            <type>RoleType</type>
            <filter>
                <q:equal>
                    <q:path>requestable</q:path>
                    <q:value>true</q:value>
                </q:equal>
            </filter>
        </target>
    </authorization>
    <authorization id="8">
        <name>self-execution-modify</name>
        <description>
    		Authorization that allows to self-modification of some properties, but only in execution phase. 
    		The limitation real limitation of these operations is done in the request phase.
    		E.g. the modification of assignments is controlled in the request phase by using the #assign
    		authorization.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#modify</action>
        <phase>execution</phase>
        <object id="21">
            <special>self</special>
        </object>
        <c:item>credentials</c:item>
        <c:item>assignment</c:item>
    </authorization>
    <authorization id="9">
        <name>self-shadow-execution-add-modify-delete</name>
        <description>
    		Authorization that allows to self-modification of user's accounts, but only in execution phase.
    		The real limitation of these operations is done in the request phase.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#add</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#modify</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#delete</action>
        <phase>execution</phase>
        <object id="22">
            <type>ShadowType</type>
            <owner>
                <special>self</special>
            </owner>
        </object>
    </authorization>
    <authorization id="10">
        <name>assignment-target-read</name>
        <description>
    		Authorization that allows to read all the object that are possible assignment targets. We want that
    		to display the targets in the selection windows.
    		Note that this authorization may be too broad for production use. Normally it should be limited to just
    		selected properties such as name and description.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="23">
            <type>OrgType</type>
        </object>
        <object id="24">
            <type>ResourceType</type>
        </object>
        <object id="25">
            <type>RoleType</type>
        </object>
        <object id="26">
            <type>ServiceType</type>
        </object>
        <object id="27">
            <type>UserType</type>
        </object>
    </authorization>
    <authorization id="11">
        <name>assignment-target-read-task</name>
        <description>
    		Authorization that allows to read workflow status of tasks. This is used to display requests
    		to the end users, especially in the "My Requests" box in user dashboard.
    		This authorization is a temporary solution. It will be replaced by a finer-grained
    		permissions in the future.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="28">
            <type>TaskType</type>
        </object>
        <c:item>workflowContext</c:item>
    </authorization>
    <authorization id="12">
        <name>self-owned-task-read</name>
        <description>
    		Authorization that allows to see all tasks owned by a currently logged-in user.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="29">
            <type>TaskType</type>
            <owner>
                <special>self</special>
            </owner>
        </object>
    </authorization>
    <authorization id="13">
        <name>self-owned-task-add-execute-changes</name>
        <description>
    		Authorization to create a new 'execute changes' task owned by a currently logged-in user.
    		This is needed to execute asynchronous operations from the GUI.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#add</action>
        <object id="30">
            <type>TaskType</type>
            <filter>
                <q:equal>
                    <q:path>handlerUri</q:path>
                    <q:value>http://midpoint.evolveum.com/xml/ns/public/model/synchronization/task/execute/handler-3</q:value>
                </q:equal>
            </filter>
            <owner>
                <special>self</special>
            </owner>
        </object>
    </authorization>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="00000000-0000-0000-0000-00000000000a" version="24">
    <name>Approver</name>
    <description>Role authorizing users to make approval decisions on work items.</description>
    <subtype>system</subtype>
    <authorization id="1">
        <name>gui-approver-access</name>
        <description>
    		Allow access to list of work items in GUI. Allow access to pages that show object details,
    		so the approver may examine who is requesting and what is requesting.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#workItem</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#myWorkItems</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#claimableWorkItems</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#userDetails</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#roleDetails</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#orgUnit</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#service</action>
    </authorization>
    <authorization id="2">
        <name>workitems-delegate</name>
        <description>
			Allow delegation of own work items.
		</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#delegateOwnWorkItems</action>
    </authorization>
    <authorization id="3">
        <name>tasks-read</name>
        <description>
            Allow to see the requester of the operation that is being approved and the current delta.
            In order for the approver to see other properties (e.g. history of the approvals) please allow read access
            to other items as well, e.g. to the whole workflowContext.
        </description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="8">
            <type>TaskType</type>
        </object>
        <c:item>workflowContext/requesterRef</c:item>
        <c:item>workflowContext/processorSpecificState</c:item>
    </authorization>
    <authorization id="4">
        <name>users-read</name>
        <description>
    		Allow to read basic user properties to be able to display requestor details in the
    		approval forms.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="9">
            <type>UserType</type>
        </object>
        <c:item>name</c:item>
        <c:item>givenName</c:item>
        <c:item>familyName</c:item>
        <c:item>fullName</c:item>
        <c:item>employeeType</c:item>
        <c:item>employeeNumber</c:item>
    </authorization>
    <authorization id="5">
        <name>roles-read</name>
        <description>
    		Allow to read basic role properties to be able to display details of the requested role.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="10">
            <type>RoleType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>roleType</c:item>
    </authorization>
    <authorization id="6">
        <name>orgs-read</name>
        <description>
    		Allow to read basic org properties to be able to display details of the requested org.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="11">
            <type>OrgType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>subtype</c:item>
    </authorization>
    <authorization id="7">
        <name>services-read</name>
        <description>
    		Allow to read basic service properties to be able to display details of the requested service.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="12">
            <type>ServiceType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>serviceType</c:item>
    </authorization>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="00000000-0000-0000-0000-00000000000b" version="25">
    <name>Reviewer</name>
    <description>Role authorizing users to make decisions on certification cases.</description>
    <subtype>system</subtype>
    <authorization id="1">
        <name>gui-reviewer-access</name>
        <description>
    		Allow access to list of certification cases in GUI. Allow access to pages that show object details,
    		so the reviewer may examine data related to the request.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#myCertificationDecisions</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#userDetails</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#roleDetails</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#orgUnit</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#service</action>
    </authorization>
    <authorization id="2">
        <name>read-and-make-decisions</name>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#readOwnCertificationDecisions</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#recordCertificationDecision</action>
    </authorization>
    <authorization id="3">
        <name>users-read</name>
        <description>
    		Allow to read basic user properties.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="7">
            <type>UserType</type>
        </object>
        <c:item>name</c:item>
        <c:item>givenName</c:item>
        <c:item>familyName</c:item>
        <c:item>fullName</c:item>
        <c:item>employeeType</c:item>
        <c:item>employeeNumber</c:item>
        <c:item>subtype</c:item>
    </authorization>
    <authorization id="4">
        <name>roles-read</name>
        <description>
    		Allow to read basic role properties.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="8">
            <type>RoleType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>roleType</c:item>
    </authorization>
    <authorization id="5">
        <name>orgs-read</name>
        <description>
    		Allow to read basic org properties.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="9">
            <type>RoleType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>subtype</c:item>
    </authorization>
    <authorization id="6">
        <name>services-read</name>
        <description>
    		Allow to read basic service properties.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="10">
            <type>ServiceType</type>
        </object>
        <c:item>name</c:item>
        <c:item>displayName</c:item>
        <c:item>identifier</c:item>
        <c:item>description</c:item>
        <c:item>riskLevel</c:item>
        <c:item>serviceType</c:item>
    </authorization>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="00000000-0000-0000-0000-00000000000c" version="22">
    <name>Delegator</name>
    <description>Role authorizing users to delegate their own privileges to any other user.</description>
    <subtype>system</subtype>
    <authorization id="1">
        <name>gui-delegator-access</name>
        <description>
    		Allow access to the delegate functionality (e.g. "add delegation" button).
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-ui-3#delegate</action>
    </authorization>
    <authorization id="2">
        <name>delegator-req</name>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#delegate</action>
        <phase>request</phase>
        <object id="6">
            <type>UserType</type>
        </object>
        <target id="7">
            <special>self</special>
        </target>
    </authorization>
    <authorization id="3">
        <name>delegator-exec-user</name>
        <description>
    		Quite strong universal execution rights are needed here. We are going to modify other users
    		(deputy assignments are in the delegate user, not delegator).
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#modify</action>
        <phase>execution</phase>
        <object id="8">
            <type>UserType</type>
        </object>
    </authorization>
    <authorization id="4">
        <name>delegator-exec-shadow</name>
        <description>
    		Quite strong universal execution rights are needed here. We are going to modify other users
    		(deputy assignments are in the delegate user, not delegator). Modification of other users
    		may mean also creation/modification/deletion of their accounts.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#add</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#modify</action>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#delete</action>
        <phase>execution</phase>
        <object id="9">
            <type>ShadowType</type>
        </object>
    </authorization>
    <authorization id="5">
        <name>delegator-read-delagate-assignments</name>
        <description>
    		Authorization to read the assignments and assignment-related items from my delegates.
    		This authorization is necessary so the self-service GUI can properly display user's
    		delegations. Delegations are in fact assignments in the delegate object, not delegator
    		object. Therefore authorization to read just "self" will not display the delegations.
    	</description>
        <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-model-3#read</action>
        <object id="10">
            <type>UserType</type>
            <delegator>
                <special>self</special>
            </delegator>
        </object>
        <c:item>assignment</c:item>
        <c:item>roleMembershipRef</c:item>
        <c:item>delegatedRef</c:item>
    </authorization>
</role>

<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="d222064f-b8f7-4cb2-8ba0-de4591de6fde" version="19">
    <name>Metarole: Approval by Council of Patrons</name>
    <description>Role assigned to this metarole will require approval by any member of Council of Patrons organization in order to be assigned to user.</description>
    <inducement id="1">
        <policyRule>
            <name>Patrons approval</name>
            <policyConstraints>
                <assignment id="2">
                    <operation>add</operation>
                </assignment>
            </policyConstraints>
            <policyActions>
                <approval id="3">
                    <compositionStrategy>
                        <order>20</order>
                        <exclusive>true</exclusive>
                    </compositionStrategy>
                    <approvalSchema>
                        <stage id="4">
                            <name>Council of Patrons</name>
                            <approverRef relation="org:default" type="c:OrgType">
                                <filter>
                                    <q:equal>
                                        <q:path>name</q:path>
                                        <q:value>Council of Patrons</q:value>
                                    </q:equal>
                                </filter>
                                <resolutionTime>run</resolutionTime>
                            </approverRef>
                            <evaluationStrategy>firstDecides</evaluationStrategy>
                            <outcomeIfNoApprovers>reject</outcomeIfNoApprovers>
                            <groupExpansion>onWorkItemCreation</groupExpansion>
                        </stage>
                    </approvalSchema>
                </approval>
            </policyActions>
        </policyRule>
    </inducement>
    <requestable>false</requestable>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="d9600138-2d65-4509-be93-2c218a3514f3" version="23">
    <name>Metarole: Approval by Manager</name>
    <description>Role assigned to this metarole will require approval by user's manager (if any) in order to be assigned.</description>
    <inducement id="1">
        <policyRule>
            <name>Manager approval</name>
            <policyConstraints>
                <assignment id="3">
                    <operation>add</operation>
                    <operation>delete</operation>
                </assignment>
            </policyConstraints>
            <policyActions>
                <approval id="4">
                    <compositionStrategy>
                        <order>10</order>
                        <exclusive>true</exclusive>
                    </compositionStrategy>
                    <approvalSchema>
                        <stage id="5">
                            <name>Manager</name>
                            <approverExpression>
                                <script xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:ScriptExpressionEvaluatorType">
                                    <code>midpoint.getManagersOidsExceptUser(object)</code>
                                </script>
                            </approverExpression>
                            <evaluationStrategy>firstDecides</evaluationStrategy>
                            <outcomeIfNoApprovers>skip</outcomeIfNoApprovers>
                        </stage>
                    </approvalSchema>
                </approval>
            </policyActions>
        </policyRule>
    </inducement>
    <inducement id="2">
        <targetRef oid="00000000-0000-0000-0000-00000000000a" relation="org:default" type="c:RoleType">
            <!-- Approver -->
        </targetRef>
    </inducement>
    <requestable>false</requestable>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="1ba23cd0-8fe4-11e2-86e1-3c970e467874" version="31">
    <name>Patron</name>
    <description>A role for art patrons. Designed to be assigned manually and approved in the workflow.</description>
    <assignment id="1">
        <targetRef oid="d9600138-2d65-4509-be93-2c218a3514f3" relation="org:default" type="c:RoleType">
            <!-- Metarole: Approval by Manager -->
        </targetRef>
        <activation>
            <effectiveStatus>enabled</effectiveStatus>
        </activation>
    </assignment>
    <assignment id="2">
        <targetRef oid="d222064f-b8f7-4cb2-8ba0-de4591de6fde" relation="org:default" type="c:RoleType">
            <!-- Metarole: Approval by Council of Patrons -->
        </targetRef>
        <activation>
            <effectiveStatus>enabled</effectiveStatus>
        </activation>
    </assignment>
    <iteration>0</iteration>
    <iterationToken/>
    <activation>
        <effectiveStatus>enabled</effectiveStatus>
        <enableTimestamp>2018-06-22T15:58:29.713+02:00</enableTimestamp>
    </activation>
    <inducement id="3">
        <description>Addressbook resource</description>
        <construction>
            <resourceRef oid="c1b8b075-8c45-4058-ba32-753b87ac2da0" relation="org:default" type="c:ResourceType">
                <!-- Addressbook -->
            </resourceRef>
            <attribute id="4">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:office_id</c:ref>
                <outbound>
                    <expression>
                        <value>Patron</value>
                    </expression>
                </outbound>
            </attribute>
        </construction>
    </inducement>
    <requestable>true</requestable>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="3154fafb-9f9f-4c3b-93ae-7fffd43796bf" version="32">
    <name>LDAP Projects MetaRole</name>
    <description>using to push new Projects to LDAP automatically</description>
    <inducement id="1">
        <construction>
            <resourceRef oid="ebd0bf7b-7e80-4175-ba5e-4fd5de2ecd62" relation="org:default" type="c:ResourceType">
                <!-- LDAP Server (OpenLDAP) -->
            </resourceRef>
            <kind>entitlement</kind>
            <intent>ldapProject</intent>
        </construction>
    </inducement>
    <inducement id="2">
        <construction>
            <resourceRef oid="ebd0bf7b-7e80-4175-ba5e-4fd5de2ecd62" relation="org:default" type="c:ResourceType">
                <!-- LDAP Server (OpenLDAP) -->
            </resourceRef>
            <kind>account</kind>
            <intent>default</intent>
            <association id="3">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:ldapGroups</c:ref>
                <outbound>
                    <expression>
                        <associationFromLink xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xsi:type="c:AssociationFromLinkExpressionEvaluatorType">
                            <projectionDiscriminator xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="c:ShadowDiscriminatorType">
                                <kind>entitlement</kind>
                                <intent>ldapProject</intent>
                            </projectionDiscriminator>
                        </associationFromLink>
                    </expression>
                </outbound>
            </association>
        </construction>
        <focusType>UserType</focusType>
        <order>2</order>
    </inducement>
    <requestable>false</requestable>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="8d62985c-7797-11e2-94a6-001e8c717e5b" version="23">
    <name>Contractor</name>
    <description>Role that gives contractors necessary access.</description>
    <inducement id="1">
        <description>Addressbook resource. We want contractors to be in addressbook. But not in the LDAP.</description>
        <construction>
            <resourceRef oid="c1b8b075-8c45-4058-ba32-753b87ac2da0" relation="org:default" type="c:ResourceType">
                <!-- Addressbook -->
            </resourceRef>
            <attribute id="2">
                <c:ref xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">ri:office_id</c:ref>
                <outbound>
                    <expression>
                        <value>Contractor</value>
                    </expression>
                </outbound>
            </attribute>
        </construction>
    </inducement>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="abf3884a-7778-11e2-abb7-001e8c717e5b" version="41">
    <name>Full Time Employee</name>
    <description>Basic role for full-time employee. It contains basic access rights that every employee should get automatically.</description>
    <inducement id="1">
        <description>Addressbook resource</description>
        <construction>
            <resourceRef oid="c1b8b075-8c45-4058-ba32-753b87ac2da0" relation="org:default" type="c:ResourceType">
                <!-- Addressbook -->
            </resourceRef>
        </construction>
    </inducement>
    <inducement id="2">
        <description>End user role membership</description>
        <targetRef oid="00000000-0000-0000-0000-000000000008" relation="org:default" type="c:RoleType">
            <!-- End user -->
        </targetRef>
    </inducement>
    <inducement id='3'>
	<description>LDAP resource with implied group membership</description>
    	<construction>
    	    <!-- The c: prefix in type must be there due to a JAXB bug -->
    	    <resourceRef oid="ebd0bf7b-7e80-4175-ba5e-4fd5de2ecd62" type="c:ResourceType"/>
    	    <kind>account</kind>
	    <intent>default</intent>
	    <association>
	        <ref>ri:ldapGroups</ref>
	        <outbound>
	            <expression>
	                <associationTargetSearch>
	                    <filter>
	                        <q:equal>
	                            <q:path>
					declare namespace icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3";
					declare namespace ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3";
					attributes/ri:cn
	                            </q:path>
	                            <q:value>employees</q:value>
	                        </q:equal>
	                    </filter>
	                    <searchStrategy>onResourceIfNeeded</searchStrategy>
	                </associationTargetSearch>
	            </expression>
	        </outbound>
	    </association>
    	</construction>
    </inducement>
</role>

	<role xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" oid="bcf00adb-67c6-43be-bf60-3e6e1a52db25" version="26">
    <name>LDAP Orgs MetaRole</name>
    <description>using to push new Orgs to LDAP automatically</description>
    <inducement id="1">
        <construction>
            <resourceRef oid="ebd0bf7b-7e80-4175-ba5e-4fd5de2ecd62" relation="org:default" type="c:ResourceType">
                <!-- LDAP Server (OpenLDAP) -->
            </resourceRef>
            <kind>generic</kind>
            <intent>ou</intent>
        </construction>
        <order>1</order>
    </inducement>
    <requestable>false</requestable>
</role>
</objects>
